<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ZhehanZ Protection</title>
  <style>
    body { font-family:'Arial',sans-serif; display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;min-height:100vh;margin:0;padding:20px;background:#fff;color:#333 }
    .spinner,.warning-sign {width:40px;height:40px;margin-bottom:20px}
    .spinner {border:4px solid #ddd;border-top:4px solid #333;border-radius:50%;animation:spin 1s linear infinite}
    .warning-sign {border:4px solid #333;border-radius:50%;display:none;position:relative}
    .warning-sign::before {content:"!";color:#333;font-size:24px;font-weight:bold;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}
    @keyframes spin {to{transform:rotate(360deg)}}
    .large{font-size:1.8em;font-weight:bold;margin:0}
    .status{font-size:1em;color:#777;margin:8px 0 20px}
    .captcha-container{margin:20px 0}
    .captcha-container form{display:inline-block;text-align:left;}
    .protection{font-size:0.8em;color:#777;margin-top:20px;margin-bottom:5px}
    .more-info{display:flex;flex-direction:column;align-items:center}
    .more-info a{font-size:0.8em;color:#777;text-decoration:underline;cursor:pointer;margin-bottom:5px}
    .info-text{font-size:0.8em;color:#777;text-align:center;max-width:55%;overflow:hidden;max-height:0;opacity:0;transition:max-height 0.3s ease,opacity 0.3s ease}
    .info-text.open{max-height:200px;opacity:1}
    .info-text p{margin:4px 0}
    @media (prefers-color-scheme:dark){body{background:#121212;color:#e0e0e0}.spinner{border:4px solid #444;border-top:4px solid #e0e0e0}.warning-sign{border-color:#e0e0e0}.warning-sign::before{color:#e0e0e0}.status,.protection,.info-text{color:#aaa}.more-info a{color:#aaa}}
  </style>
</head>
<body>
  <div class="spinner"></div>
  <div class="warning-sign"></div>
  <p class="large" id="main-text"></p>
  <p class="status" id="status-text"></p>
  <div class="captcha-container">
    <form id="captcha-form">::CAPTCHA_BOX::</form>
  </div>
  <p class="protection" id="protection-text"></p>
  <div class="more-info">
    <a id="toggle-info"></a>
    <div class="info-text" id="info-text"></div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('captcha-form');
      const widgetSelector = 'input[name="cf-turnstile-response"], input[name="cf_challenge_response"]';
      function hideNonWidget() {
        const children = Array.from(form.children);
        children.forEach(child => {
          if (child.querySelector(widgetSelector)) {
            child.style.display = '';
          } else {
            child.style.display = 'none';
          }
        });
      }
      // observe additions
      const observer = new MutationObserver(hideNonWidget);
      observer.observe(form, { childList: true, subtree: true });
      // initial hide
      hideNonWidget();

      // determine mode
      const widgetExists = !!form.querySelector(widgetSelector);
      const lang = navigator.language.startsWith('zh') ? 'zh' : 'en';
      const texts5 = {
        en:{main:'A moment please',status1:'Checking your network...',status2:'Check complete. Proceeding...',protection:'ZhehanZ protected by Cloudflare',show:'Show details',hide:'Hide details',details:['::RAY_ID::','::CLIENT_IP:: ::GEO::','This page appears due to unusual activity or enhanced security measures.']},
        zh:{main:'请稍作等候',status1:'正在检查网络',status2:'检查完成，即将继续访问',protection:'ZhehanZ 由 Cloudflare 防护',show:'查看更多信息',hide:'隐藏更多信息',details:['::RAY_ID::','::CLIENT_IP:: ::GEO::','此页面因异常网络活动或强化的安全防护而显示。']}
      };
      const textCap = {
        en:{main:'Complete verification',status:'Pass the turnstile to continue access',protection:'ZhehanZ protected by Cloudflare',show:'Show details',hide:'Hide details',details:['::RAY_ID::','::CLIENT_IP:: ::GEO::','This page appears due to unusual activity or enhanced security measures.']},
        zh:{main:'请完成验证',status:'完成以下人机验证以继续访问',protection:'ZhehanZ 由 Cloudflare 提供防护',show:'查看更多信息',hide:'隐藏更多信息',details:['::RAY_ID::','::CLIENT_IP:: ::GEO::','此页面因异常网络活动或强化的安全防护而显示。']}
      };
      const mode = widgetExists ? 'captcha' : '5s';
      const t = mode==='captcha' ? textCap[lang] : texts5[lang];
      // icons
      document.querySelector('.spinner').style.display = mode==='5s' ? 'block' : 'none';
      document.querySelector('.warning-sign').style.display = mode==='captcha' ? 'block' : 'none';
      // texts
      document.getElementById('main-text').textContent = t.main;
      if(mode==='5s'){
        const statusEl = document.getElementById('status-text');
        statusEl.textContent = t.status1;
        setTimeout(()=>{ statusEl.textContent = t.status2; },5000);
      } else {
        document.getElementById('status-text').textContent = t.status;
      }
      document.getElementById('protection-text').textContent = t.protection;
      // details toggle
      const toggle = document.getElementById('toggle-info');
      const info = document.getElementById('info-text');
      toggle.textContent = t.show;
      toggle.addEventListener('click', () => {
        const open = info.classList.toggle('open');
        toggle.textContent = open ? t.hide : t.show;
        if(open) info.innerHTML = t.details.map(d => `<p>${d}</p>`).join('');
      });
    });
  </script>
</body>
</html>
